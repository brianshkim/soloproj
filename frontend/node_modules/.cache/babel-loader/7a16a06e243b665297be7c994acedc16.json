{"ast":null,"code":"'use strict';\n\nmodule.exports = function parseBytea(input) {\n  if (/^\\\\x/.test(input)) {\n    // new 'hex' style response (pg >9.0)\n    return new Buffer(input.substr(2), 'hex');\n  }\n\n  var output = '';\n  var i = 0;\n\n  while (i < input.length) {\n    if (input[i] !== '\\\\') {\n      output += input[i];\n      ++i;\n    } else {\n      if (/[0-7]{3}/.test(input.substr(i + 1, 3))) {\n        output += String.fromCharCode(parseInt(input.substr(i + 1, 3), 8));\n        i += 4;\n      } else {\n        var backslashes = 1;\n\n        while (i + backslashes < input.length && input[i + backslashes] === '\\\\') {\n          backslashes++;\n        }\n\n        for (var k = 0; k < Math.floor(backslashes / 2); ++k) {\n          output += '\\\\';\n        }\n\n        i += Math.floor(backslashes / 2) * 2;\n      }\n    }\n  }\n\n  return new Buffer(output, 'binary');\n};","map":{"version":3,"names":["module","exports","parseBytea","input","test","Buffer","substr","output","i","length","String","fromCharCode","parseInt","backslashes","k","Math","floor"],"sources":["/home/brian/node_modules/postgres-bytea/index.js"],"sourcesContent":["'use strict'\n\nmodule.exports = function parseBytea (input) {\n  if (/^\\\\x/.test(input)) {\n    // new 'hex' style response (pg >9.0)\n    return new Buffer(input.substr(2), 'hex')\n  }\n  var output = ''\n  var i = 0\n  while (i < input.length) {\n    if (input[i] !== '\\\\') {\n      output += input[i]\n      ++i\n    } else {\n      if (/[0-7]{3}/.test(input.substr(i + 1, 3))) {\n        output += String.fromCharCode(parseInt(input.substr(i + 1, 3), 8))\n        i += 4\n      } else {\n        var backslashes = 1\n        while (i + backslashes < input.length && input[i + backslashes] === '\\\\') {\n          backslashes++\n        }\n        for (var k = 0; k < Math.floor(backslashes / 2); ++k) {\n          output += '\\\\'\n        }\n        i += Math.floor(backslashes / 2) * 2\n      }\n    }\n  }\n  return new Buffer(output, 'binary')\n}\n"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,OAAP,GAAiB,SAASC,UAAT,CAAqBC,KAArB,EAA4B;EAC3C,IAAI,OAAOC,IAAP,CAAYD,KAAZ,CAAJ,EAAwB;IACtB;IACA,OAAO,IAAIE,MAAJ,CAAWF,KAAK,CAACG,MAAN,CAAa,CAAb,CAAX,EAA4B,KAA5B,CAAP;EACD;;EACD,IAAIC,MAAM,GAAG,EAAb;EACA,IAAIC,CAAC,GAAG,CAAR;;EACA,OAAOA,CAAC,GAAGL,KAAK,CAACM,MAAjB,EAAyB;IACvB,IAAIN,KAAK,CAACK,CAAD,CAAL,KAAa,IAAjB,EAAuB;MACrBD,MAAM,IAAIJ,KAAK,CAACK,CAAD,CAAf;MACA,EAAEA,CAAF;IACD,CAHD,MAGO;MACL,IAAI,WAAWJ,IAAX,CAAgBD,KAAK,CAACG,MAAN,CAAaE,CAAC,GAAG,CAAjB,EAAoB,CAApB,CAAhB,CAAJ,EAA6C;QAC3CD,MAAM,IAAIG,MAAM,CAACC,YAAP,CAAoBC,QAAQ,CAACT,KAAK,CAACG,MAAN,CAAaE,CAAC,GAAG,CAAjB,EAAoB,CAApB,CAAD,EAAyB,CAAzB,CAA5B,CAAV;QACAA,CAAC,IAAI,CAAL;MACD,CAHD,MAGO;QACL,IAAIK,WAAW,GAAG,CAAlB;;QACA,OAAOL,CAAC,GAAGK,WAAJ,GAAkBV,KAAK,CAACM,MAAxB,IAAkCN,KAAK,CAACK,CAAC,GAAGK,WAAL,CAAL,KAA2B,IAApE,EAA0E;UACxEA,WAAW;QACZ;;QACD,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWH,WAAW,GAAG,CAAzB,CAApB,EAAiD,EAAEC,CAAnD,EAAsD;UACpDP,MAAM,IAAI,IAAV;QACD;;QACDC,CAAC,IAAIO,IAAI,CAACC,KAAL,CAAWH,WAAW,GAAG,CAAzB,IAA8B,CAAnC;MACD;IACF;EACF;;EACD,OAAO,IAAIR,MAAJ,CAAWE,MAAX,EAAmB,QAAnB,CAAP;AACD,CA5BD"},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"'use strict';\n\nconst Promise = require('../../promise');\n\nclass ResourceLock {\n  constructor(resource) {\n    this.resource = resource;\n    this.previous = Promise.resolve(resource);\n  }\n\n  unwrap() {\n    return this.resource;\n  }\n\n  lock() {\n    const lock = this.previous;\n    let resolve;\n    this.previous = new Promise(r => {\n      resolve = r;\n    });\n    return lock.disposer(resolve);\n  }\n\n}\n\nmodule.exports = ResourceLock;","map":{"version":3,"names":["Promise","require","ResourceLock","constructor","resource","previous","resolve","unwrap","lock","r","disposer","module","exports"],"sources":["/home/brian/node_modules/sequelize/lib/dialects/mssql/resource-lock.js"],"sourcesContent":["'use strict';\n\nconst Promise = require('../../promise');\n\nclass ResourceLock {\n  constructor(resource) {\n    this.resource = resource;\n    this.previous = Promise.resolve(resource);\n  }\n\n  unwrap() {\n    return this.resource;\n  }\n\n  lock() {\n    const lock = this.previous;\n    let resolve;\n    this.previous = new Promise(r => {\n      resolve = r;\n    });\n    return lock.disposer(resolve);\n  }\n}\n\nmodule.exports = ResourceLock;\n"],"mappings":"AAAA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,eAAD,CAAvB;;AAEA,MAAMC,YAAN,CAAmB;EACjBC,WAAW,CAACC,QAAD,EAAW;IACpB,KAAKA,QAAL,GAAgBA,QAAhB;IACA,KAAKC,QAAL,GAAgBL,OAAO,CAACM,OAAR,CAAgBF,QAAhB,CAAhB;EACD;;EAEDG,MAAM,GAAG;IACP,OAAO,KAAKH,QAAZ;EACD;;EAEDI,IAAI,GAAG;IACL,MAAMA,IAAI,GAAG,KAAKH,QAAlB;IACA,IAAIC,OAAJ;IACA,KAAKD,QAAL,GAAgB,IAAIL,OAAJ,CAAYS,CAAC,IAAI;MAC/BH,OAAO,GAAGG,CAAV;IACD,CAFe,CAAhB;IAGA,OAAOD,IAAI,CAACE,QAAL,CAAcJ,OAAd,CAAP;EACD;;AAjBgB;;AAoBnBK,MAAM,CAACC,OAAP,GAAiBV,YAAjB"},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"'use strict';\n\nvar path = require('path'),\n    Stream = require('stream').Stream,\n    split = require('split2'),\n    util = require('util'),\n    defaultPort = 5432,\n    isWin = process.platform === 'win32',\n    warnStream = process.stderr;\n\nvar S_IRWXG = 56 //    00070(8)\n,\n    S_IRWXO = 7 //    00007(8)\n,\n    S_IFMT = 61440 // 00170000(8)\n,\n    S_IFREG = 32768 //  0100000(8)\n;\n\nfunction isRegFile(mode) {\n  return (mode & S_IFMT) == S_IFREG;\n}\n\nvar fieldNames = ['host', 'port', 'database', 'user', 'password'];\nvar nrOfFields = fieldNames.length;\nvar passKey = fieldNames[nrOfFields - 1];\n\nfunction warn() {\n  var isWritable = warnStream instanceof Stream && true === warnStream.writable;\n\n  if (isWritable) {\n    var args = Array.prototype.slice.call(arguments).concat(\"\\n\");\n    warnStream.write(util.format.apply(util, args));\n  }\n}\n\nObject.defineProperty(module.exports, 'isWin', {\n  get: function () {\n    return isWin;\n  },\n  set: function (val) {\n    isWin = val;\n  }\n});\n\nmodule.exports.warnTo = function (stream) {\n  var old = warnStream;\n  warnStream = stream;\n  return old;\n};\n\nmodule.exports.getFileName = function (rawEnv) {\n  var env = rawEnv || process.env;\n  var file = env.PGPASSFILE || (isWin ? path.join(env.APPDATA || './', 'postgresql', 'pgpass.conf') : path.join(env.HOME || './', '.pgpass'));\n  return file;\n};\n\nmodule.exports.usePgPass = function (stats, fname) {\n  if (Object.prototype.hasOwnProperty.call(process.env, 'PGPASSWORD')) {\n    return false;\n  }\n\n  if (isWin) {\n    return true;\n  }\n\n  fname = fname || '<unkn>';\n\n  if (!isRegFile(stats.mode)) {\n    warn('WARNING: password file \"%s\" is not a plain file', fname);\n    return false;\n  }\n\n  if (stats.mode & (S_IRWXG | S_IRWXO)) {\n    /* If password file is insecure, alert the user and ignore it. */\n    warn('WARNING: password file \"%s\" has group or world access; permissions should be u=rw (0600) or less', fname);\n    return false;\n  }\n\n  return true;\n};\n\nvar matcher = module.exports.match = function (connInfo, entry) {\n  return fieldNames.slice(0, -1).reduce(function (prev, field, idx) {\n    if (idx == 1) {\n      // the port\n      if (Number(connInfo[field] || defaultPort) === Number(entry[field])) {\n        return prev && true;\n      }\n    }\n\n    return prev && (entry[field] === '*' || entry[field] === connInfo[field]);\n  }, true);\n};\n\nmodule.exports.getPassword = function (connInfo, stream, cb) {\n  var pass;\n  var lineStream = stream.pipe(split());\n\n  function onLine(line) {\n    var entry = parseLine(line);\n\n    if (entry && isValidEntry(entry) && matcher(connInfo, entry)) {\n      pass = entry[passKey];\n      lineStream.end(); // -> calls onEnd(), but pass is set now\n    }\n  }\n\n  var onEnd = function () {\n    stream.destroy();\n    cb(pass);\n  };\n\n  var onErr = function (err) {\n    stream.destroy();\n    warn('WARNING: error on reading file: %s', err);\n    cb(undefined);\n  };\n\n  stream.on('error', onErr);\n  lineStream.on('data', onLine).on('end', onEnd).on('error', onErr);\n};\n\nvar parseLine = module.exports.parseLine = function (line) {\n  if (line.length < 11 || line.match(/^\\s+#/)) {\n    return null;\n  }\n\n  var curChar = '';\n  var prevChar = '';\n  var fieldIdx = 0;\n  var startIdx = 0;\n  var endIdx = 0;\n  var obj = {};\n  var isLastField = false;\n\n  var addToObj = function (idx, i0, i1) {\n    var field = line.substring(i0, i1);\n\n    if (!Object.hasOwnProperty.call(process.env, 'PGPASS_NO_DEESCAPE')) {\n      field = field.replace(/\\\\([:\\\\])/g, '$1');\n    }\n\n    obj[fieldNames[idx]] = field;\n  };\n\n  for (var i = 0; i < line.length - 1; i += 1) {\n    curChar = line.charAt(i + 1);\n    prevChar = line.charAt(i);\n    isLastField = fieldIdx == nrOfFields - 1;\n\n    if (isLastField) {\n      addToObj(fieldIdx, startIdx);\n      break;\n    }\n\n    if (i >= 0 && curChar == ':' && prevChar !== '\\\\') {\n      addToObj(fieldIdx, startIdx, i + 1);\n      startIdx = i + 2;\n      fieldIdx += 1;\n    }\n  }\n\n  obj = Object.keys(obj).length === nrOfFields ? obj : null;\n  return obj;\n};\n\nvar isValidEntry = module.exports.isValidEntry = function (entry) {\n  var rules = {\n    // host\n    0: function (x) {\n      return x.length > 0;\n    },\n    // port\n    1: function (x) {\n      if (x === '*') {\n        return true;\n      }\n\n      x = Number(x);\n      return isFinite(x) && x > 0 && x < 9007199254740992 && Math.floor(x) === x;\n    },\n    // database\n    2: function (x) {\n      return x.length > 0;\n    },\n    // username\n    3: function (x) {\n      return x.length > 0;\n    },\n    // password\n    4: function (x) {\n      return x.length > 0;\n    }\n  };\n\n  for (var idx = 0; idx < fieldNames.length; idx += 1) {\n    var rule = rules[idx];\n    var value = entry[fieldNames[idx]] || '';\n    var res = rule(value);\n\n    if (!res) {\n      return false;\n    }\n  }\n\n  return true;\n};","map":{"version":3,"names":["path","require","Stream","split","util","defaultPort","isWin","process","platform","warnStream","stderr","S_IRWXG","S_IRWXO","S_IFMT","S_IFREG","isRegFile","mode","fieldNames","nrOfFields","length","passKey","warn","isWritable","writable","args","Array","prototype","slice","call","arguments","concat","write","format","apply","Object","defineProperty","module","exports","get","set","val","warnTo","stream","old","getFileName","rawEnv","env","file","PGPASSFILE","join","APPDATA","HOME","usePgPass","stats","fname","hasOwnProperty","matcher","match","connInfo","entry","reduce","prev","field","idx","Number","getPassword","cb","pass","lineStream","pipe","onLine","line","parseLine","isValidEntry","end","onEnd","destroy","onErr","err","undefined","on","curChar","prevChar","fieldIdx","startIdx","endIdx","obj","isLastField","addToObj","i0","i1","substring","replace","i","charAt","keys","rules","x","isFinite","Math","floor","rule","value","res"],"sources":["/home/brian/node_modules/pgpass/lib/helper.js"],"sourcesContent":["'use strict';\n\nvar path = require('path')\n  , Stream = require('stream').Stream\n  , split = require('split2')\n  , util = require('util')\n  , defaultPort = 5432\n  , isWin = (process.platform === 'win32')\n  , warnStream = process.stderr\n;\n\n\nvar S_IRWXG = 56     //    00070(8)\n  , S_IRWXO = 7      //    00007(8)\n  , S_IFMT  = 61440  // 00170000(8)\n  , S_IFREG = 32768  //  0100000(8)\n;\nfunction isRegFile(mode) {\n    return ((mode & S_IFMT) == S_IFREG);\n}\n\nvar fieldNames = [ 'host', 'port', 'database', 'user', 'password' ];\nvar nrOfFields = fieldNames.length;\nvar passKey = fieldNames[ nrOfFields -1 ];\n\n\nfunction warn() {\n    var isWritable = (\n        warnStream instanceof Stream &&\n          true === warnStream.writable\n    );\n\n    if (isWritable) {\n        var args = Array.prototype.slice.call(arguments).concat(\"\\n\");\n        warnStream.write( util.format.apply(util, args) );\n    }\n}\n\n\nObject.defineProperty(module.exports, 'isWin', {\n    get : function() {\n        return isWin;\n    } ,\n    set : function(val) {\n        isWin = val;\n    }\n});\n\n\nmodule.exports.warnTo = function(stream) {\n    var old = warnStream;\n    warnStream = stream;\n    return old;\n};\n\nmodule.exports.getFileName = function(rawEnv){\n    var env = rawEnv || process.env;\n    var file = env.PGPASSFILE || (\n        isWin ?\n          path.join( env.APPDATA || './' , 'postgresql', 'pgpass.conf' ) :\n          path.join( env.HOME || './', '.pgpass' )\n    );\n    return file;\n};\n\nmodule.exports.usePgPass = function(stats, fname) {\n    if (Object.prototype.hasOwnProperty.call(process.env, 'PGPASSWORD')) {\n        return false;\n    }\n\n    if (isWin) {\n        return true;\n    }\n\n    fname = fname || '<unkn>';\n\n    if (! isRegFile(stats.mode)) {\n        warn('WARNING: password file \"%s\" is not a plain file', fname);\n        return false;\n    }\n\n    if (stats.mode & (S_IRWXG | S_IRWXO)) {\n        /* If password file is insecure, alert the user and ignore it. */\n        warn('WARNING: password file \"%s\" has group or world access; permissions should be u=rw (0600) or less', fname);\n        return false;\n    }\n\n    return true;\n};\n\n\nvar matcher = module.exports.match = function(connInfo, entry) {\n    return fieldNames.slice(0, -1).reduce(function(prev, field, idx){\n        if (idx == 1) {\n            // the port\n            if ( Number( connInfo[field] || defaultPort ) === Number( entry[field] ) ) {\n                return prev && true;\n            }\n        }\n        return prev && (\n            entry[field] === '*' ||\n              entry[field] === connInfo[field]\n        );\n    }, true);\n};\n\n\nmodule.exports.getPassword = function(connInfo, stream, cb) {\n    var pass;\n    var lineStream = stream.pipe(split());\n\n    function onLine(line) {\n        var entry = parseLine(line);\n        if (entry && isValidEntry(entry) && matcher(connInfo, entry)) {\n            pass = entry[passKey];\n            lineStream.end(); // -> calls onEnd(), but pass is set now\n        }\n    }\n\n    var onEnd = function() {\n        stream.destroy();\n        cb(pass);\n    };\n\n    var onErr = function(err) {\n        stream.destroy();\n        warn('WARNING: error on reading file: %s', err);\n        cb(undefined);\n    };\n\n    stream.on('error', onErr);\n    lineStream\n        .on('data', onLine)\n        .on('end', onEnd)\n        .on('error', onErr)\n    ;\n\n};\n\n\nvar parseLine = module.exports.parseLine = function(line) {\n    if (line.length < 11 || line.match(/^\\s+#/)) {\n        return null;\n    }\n\n    var curChar = '';\n    var prevChar = '';\n    var fieldIdx = 0;\n    var startIdx = 0;\n    var endIdx = 0;\n    var obj = {};\n    var isLastField = false;\n    var addToObj = function(idx, i0, i1) {\n        var field = line.substring(i0, i1);\n\n        if (! Object.hasOwnProperty.call(process.env, 'PGPASS_NO_DEESCAPE')) {\n            field = field.replace(/\\\\([:\\\\])/g, '$1');\n        }\n\n        obj[ fieldNames[idx] ] = field;\n    };\n\n    for (var i = 0 ; i < line.length-1 ; i += 1) {\n        curChar = line.charAt(i+1);\n        prevChar = line.charAt(i);\n\n        isLastField = (fieldIdx == nrOfFields-1);\n\n        if (isLastField) {\n            addToObj(fieldIdx, startIdx);\n            break;\n        }\n\n        if (i >= 0 && curChar == ':' && prevChar !== '\\\\') {\n            addToObj(fieldIdx, startIdx, i+1);\n\n            startIdx = i+2;\n            fieldIdx += 1;\n        }\n    }\n\n    obj = ( Object.keys(obj).length === nrOfFields ) ? obj : null;\n\n    return obj;\n};\n\n\nvar isValidEntry = module.exports.isValidEntry = function(entry){\n    var rules = {\n        // host\n        0 : function(x){\n            return x.length > 0;\n        } ,\n        // port\n        1 : function(x){\n            if (x === '*') {\n                return true;\n            }\n            x = Number(x);\n            return (\n                isFinite(x) &&\n                  x > 0 &&\n                  x < 9007199254740992 &&\n                  Math.floor(x) === x\n            );\n        } ,\n        // database\n        2 : function(x){\n            return x.length > 0;\n        } ,\n        // username\n        3 : function(x){\n            return x.length > 0;\n        } ,\n        // password\n        4 : function(x){\n            return x.length > 0;\n        }\n    };\n\n    for (var idx = 0 ; idx < fieldNames.length ; idx += 1) {\n        var rule = rules[idx];\n        var value = entry[ fieldNames[idx] ] || '';\n\n        var res = rule(value);\n        if (!res) {\n            return false;\n        }\n    }\n\n    return true;\n};\n\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}
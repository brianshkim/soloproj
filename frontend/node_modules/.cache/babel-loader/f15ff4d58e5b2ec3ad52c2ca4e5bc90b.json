{"ast":null,"code":"'use strict';\n\nconst MySQLQueryGenerator = require('../mysql/query-generator');\n\nclass MariaDBQueryGenerator extends MySQLQueryGenerator {\n  createSchema(schema, options) {\n    options = Object.assign({\n      charset: null,\n      collate: null\n    }, options || {});\n    const charset = options.charset ? ` DEFAULT CHARACTER SET ${this.escape(options.charset)}` : '';\n    const collate = options.collate ? ` DEFAULT COLLATE ${this.escape(options.collate)}` : '';\n    return `CREATE SCHEMA IF NOT EXISTS ${this.quoteIdentifier(schema)}${charset}${collate};`;\n  }\n\n  dropSchema(schema) {\n    return `DROP SCHEMA IF EXISTS ${this.quoteIdentifier(schema)};`;\n  }\n\n  showSchemasQuery(options) {\n    const skip = options.skip && Array.isArray(options.skip) && options.skip.length > 0 ? options.skip : null;\n    return `SELECT SCHEMA_NAME as schema_name FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME NOT IN ('MYSQL', 'INFORMATION_SCHEMA', 'PERFORMANCE_SCHEMA'${skip ? skip.reduce((sql, schemaName) => sql += `,${this.escape(schemaName)}`, '') : ''});`;\n  }\n\n  showTablesQuery(database) {\n    let query = 'SELECT TABLE_NAME, TABLE_SCHEMA FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = \\'BASE TABLE\\'';\n\n    if (database) {\n      query += ` AND TABLE_SCHEMA = ${this.escape(database)}`;\n    } else {\n      query += ' AND TABLE_SCHEMA NOT IN (\\'MYSQL\\', \\'INFORMATION_SCHEMA\\', \\'PERFORMANCE_SCHEMA\\')';\n    }\n\n    return `${query};`;\n  }\n\n}\n\nmodule.exports = MariaDBQueryGenerator;","map":{"version":3,"names":["MySQLQueryGenerator","require","MariaDBQueryGenerator","createSchema","schema","options","Object","assign","charset","collate","escape","quoteIdentifier","dropSchema","showSchemasQuery","skip","Array","isArray","length","reduce","sql","schemaName","showTablesQuery","database","query","module","exports"],"sources":["/home/brian/node_modules/sequelize/lib/dialects/mariadb/query-generator.js"],"sourcesContent":["'use strict';\n\nconst MySQLQueryGenerator = require('../mysql/query-generator');\n\nclass MariaDBQueryGenerator extends MySQLQueryGenerator {\n  createSchema(schema, options) {\n    options = Object.assign({\n      charset: null,\n      collate: null\n    }, options || {});\n\n    const charset = options.charset ? ` DEFAULT CHARACTER SET ${this.escape(options.charset)}` : '';\n    const collate = options.collate ? ` DEFAULT COLLATE ${this.escape(options.collate)}` : '';\n\n    return `CREATE SCHEMA IF NOT EXISTS ${this.quoteIdentifier(schema)}${charset}${collate};`;\n  }\n\n  dropSchema(schema) {\n    return `DROP SCHEMA IF EXISTS ${this.quoteIdentifier(schema)};`;\n  }\n\n  showSchemasQuery(options) {\n    const skip = options.skip && Array.isArray(options.skip) && options.skip.length > 0 ? options.skip : null;\n    return `SELECT SCHEMA_NAME as schema_name FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME NOT IN ('MYSQL', 'INFORMATION_SCHEMA', 'PERFORMANCE_SCHEMA'${skip ? skip.reduce( (sql, schemaName) => sql += `,${this.escape(schemaName)}`, '') : ''});`;\n  }\n\n  showTablesQuery(database) {\n    let query = 'SELECT TABLE_NAME, TABLE_SCHEMA FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = \\'BASE TABLE\\'';\n    if (database) {\n      query += ` AND TABLE_SCHEMA = ${this.escape(database)}`;\n    } else {\n      query += ' AND TABLE_SCHEMA NOT IN (\\'MYSQL\\', \\'INFORMATION_SCHEMA\\', \\'PERFORMANCE_SCHEMA\\')';\n    }\n    return `${query};`;\n  }\n}\n\nmodule.exports = MariaDBQueryGenerator;\n"],"mappings":"AAAA;;AAEA,MAAMA,mBAAmB,GAAGC,OAAO,CAAC,0BAAD,CAAnC;;AAEA,MAAMC,qBAAN,SAAoCF,mBAApC,CAAwD;EACtDG,YAAY,CAACC,MAAD,EAASC,OAAT,EAAkB;IAC5BA,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAc;MACtBC,OAAO,EAAE,IADa;MAEtBC,OAAO,EAAE;IAFa,CAAd,EAGPJ,OAAO,IAAI,EAHJ,CAAV;IAKA,MAAMG,OAAO,GAAGH,OAAO,CAACG,OAAR,GAAmB,0BAAyB,KAAKE,MAAL,CAAYL,OAAO,CAACG,OAApB,CAA6B,EAAzE,GAA6E,EAA7F;IACA,MAAMC,OAAO,GAAGJ,OAAO,CAACI,OAAR,GAAmB,oBAAmB,KAAKC,MAAL,CAAYL,OAAO,CAACI,OAApB,CAA6B,EAAnE,GAAuE,EAAvF;IAEA,OAAQ,+BAA8B,KAAKE,eAAL,CAAqBP,MAArB,CAA6B,GAAEI,OAAQ,GAAEC,OAAQ,GAAvF;EACD;;EAEDG,UAAU,CAACR,MAAD,EAAS;IACjB,OAAQ,yBAAwB,KAAKO,eAAL,CAAqBP,MAArB,CAA6B,GAA7D;EACD;;EAEDS,gBAAgB,CAACR,OAAD,EAAU;IACxB,MAAMS,IAAI,GAAGT,OAAO,CAACS,IAAR,IAAgBC,KAAK,CAACC,OAAN,CAAcX,OAAO,CAACS,IAAtB,CAAhB,IAA+CT,OAAO,CAACS,IAAR,CAAaG,MAAb,GAAsB,CAArE,GAAyEZ,OAAO,CAACS,IAAjF,GAAwF,IAArG;IACA,OAAQ,mJAAkJA,IAAI,GAAGA,IAAI,CAACI,MAAL,CAAa,CAACC,GAAD,EAAMC,UAAN,KAAqBD,GAAG,IAAK,IAAG,KAAKT,MAAL,CAAYU,UAAZ,CAAwB,EAArE,EAAwE,EAAxE,CAAH,GAAiF,EAAG,IAAlP;EACD;;EAEDC,eAAe,CAACC,QAAD,EAAW;IACxB,IAAIC,KAAK,GAAG,kGAAZ;;IACA,IAAID,QAAJ,EAAc;MACZC,KAAK,IAAK,uBAAsB,KAAKb,MAAL,CAAYY,QAAZ,CAAsB,EAAtD;IACD,CAFD,MAEO;MACLC,KAAK,IAAI,sFAAT;IACD;;IACD,OAAQ,GAAEA,KAAM,GAAhB;EACD;;AA9BqD;;AAiCxDC,MAAM,CAACC,OAAP,GAAiBvB,qBAAjB"},"metadata":{},"sourceType":"script"}
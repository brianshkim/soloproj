{"ast":null,"code":"'use strict';\n\nconst _ = require('lodash');\n\nfunction stringifyRangeBound(bound) {\n  if (bound === null) {\n    return '';\n  }\n\n  if (bound === Infinity || bound === -Infinity) {\n    return bound.toString().toLowerCase();\n  }\n\n  return JSON.stringify(bound);\n}\n\nfunction parseRangeBound(bound, parseType) {\n  if (!bound) {\n    return null;\n  }\n\n  if (bound === 'infinity') {\n    return Infinity;\n  }\n\n  if (bound === '-infinity') {\n    return -Infinity;\n  }\n\n  return parseType(bound);\n}\n\nfunction stringify(data) {\n  if (data === null) return null;\n  if (!Array.isArray(data)) throw new Error('range must be an array');\n  if (!data.length) return 'empty';\n  if (data.length !== 2) throw new Error('range array length must be 0 (empty) or 2 (lower and upper bounds)');\n\n  if (Object.prototype.hasOwnProperty.call(data, 'inclusive')) {\n    if (data.inclusive === false) data.inclusive = [false, false];else if (!data.inclusive) data.inclusive = [true, false];else if (data.inclusive === true) data.inclusive = [true, true];\n  } else {\n    data.inclusive = [true, false];\n  }\n\n  _.each(data, (value, index) => {\n    if (_.isObject(value)) {\n      if (Object.prototype.hasOwnProperty.call(value, 'inclusive')) data.inclusive[index] = !!value.inclusive;\n      if (Object.prototype.hasOwnProperty.call(value, 'value')) data[index] = value.value;\n    }\n  });\n\n  const lowerBound = stringifyRangeBound(data[0]);\n  const upperBound = stringifyRangeBound(data[1]);\n  return `${(data.inclusive[0] ? '[' : '(') + lowerBound},${upperBound}${data.inclusive[1] ? ']' : ')'}`;\n}\n\nexports.stringify = stringify;\n\nfunction parse(value, parser) {\n  if (value === null) return null;\n\n  if (value === 'empty') {\n    return [];\n  }\n\n  let result = value.substring(1, value.length - 1).split(',', 2);\n  if (result.length !== 2) return value;\n  result = result.map((item, index) => {\n    return {\n      value: parseRangeBound(item, parser),\n      inclusive: index === 0 ? value[0] === '[' : value[value.length - 1] === ']'\n    };\n  });\n  return result;\n}\n\nexports.parse = parse;","map":{"version":3,"names":["_","require","stringifyRangeBound","bound","Infinity","toString","toLowerCase","JSON","stringify","parseRangeBound","parseType","data","Array","isArray","Error","length","Object","prototype","hasOwnProperty","call","inclusive","each","value","index","isObject","lowerBound","upperBound","exports","parse","parser","result","substring","split","map","item"],"sources":["/home/brian/node_modules/sequelize/lib/dialects/postgres/range.js"],"sourcesContent":["'use strict';\n\nconst _ = require('lodash');\n\nfunction stringifyRangeBound(bound) {\n  if (bound === null) {\n    return '' ;\n  }\n  if (bound === Infinity || bound === -Infinity) {\n    return bound.toString().toLowerCase();\n  }\n  return JSON.stringify(bound);\n}\n\nfunction parseRangeBound(bound, parseType) {\n  if (!bound) {\n    return null;\n  }\n  if (bound === 'infinity') {\n    return Infinity;\n  }\n  if (bound === '-infinity') {\n    return -Infinity;\n  }\n  return parseType(bound);\n\n}\n\nfunction stringify(data) {\n  if (data === null) return null;\n\n  if (!Array.isArray(data)) throw new Error('range must be an array');\n  if (!data.length) return 'empty';\n  if (data.length !== 2) throw new Error('range array length must be 0 (empty) or 2 (lower and upper bounds)');\n\n  if (Object.prototype.hasOwnProperty.call(data, 'inclusive')) {\n    if (data.inclusive === false) data.inclusive = [false, false];\n    else if (!data.inclusive) data.inclusive = [true, false];\n    else if (data.inclusive === true) data.inclusive = [true, true];\n  } else {\n    data.inclusive = [true, false];\n  }\n\n  _.each(data, (value, index) => {\n    if (_.isObject(value)) {\n      if (Object.prototype.hasOwnProperty.call(value, 'inclusive')) data.inclusive[index] = !!value.inclusive;\n      if (Object.prototype.hasOwnProperty.call(value, 'value')) data[index] = value.value;\n    }\n  });\n\n  const lowerBound = stringifyRangeBound(data[0]);\n  const upperBound = stringifyRangeBound(data[1]);\n\n  return `${(data.inclusive[0] ? '[' : '(') + lowerBound},${upperBound}${data.inclusive[1] ? ']' : ')'}`;\n}\nexports.stringify = stringify;\n\nfunction parse(value, parser) {\n  if (value === null) return null;\n  if (value === 'empty') {\n    return [];\n  }\n\n  let result = value\n    .substring(1, value.length - 1)\n    .split(',', 2);\n\n  if (result.length !== 2) return value;\n\n  result = result.map((item, index) => {\n    return {\n      value: parseRangeBound(item, parser),\n      inclusive: index === 0 ? value[0] === '[' : value[value.length - 1] === ']'\n    };\n  });\n\n  return result;\n}\nexports.parse = parse;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}
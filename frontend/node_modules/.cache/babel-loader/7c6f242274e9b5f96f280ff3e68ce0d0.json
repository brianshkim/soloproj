{"ast":null,"code":"import _regeneratorRuntime from\"/home/brian/w15/practice-for-week-15-react-redux-authenticate-me-long-practice-main/authenticate-me/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/brian/w15/practice-for-week-15-react-redux-authenticate-me-long-practice-main/authenticate-me/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/brian/w15/practice-for-week-15-react-redux-authenticate-me-long-practice-main/authenticate-me/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Redirect}from\"react-router-dom\";import*as sessionActions from\"../../store/session\";import'./SignupForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignupFormPage(){var dispatch=useDispatch();var sessionUser=useSelector(function(state){return state.session.user;});var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),errors=_useState10[0],setErrors=_useState10[1];if(sessionUser)return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});var handleSubmit=function handleSubmit(e){e.preventDefault();if(password===confirmPassword){setErrors([]);return dispatch(sessionActions.signup({email:email,username:username,password:password})).catch(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return res.json();case 2:data=_context.sent;if(data&&data.errors)setErrors(data.errors);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}return setErrors(['Confirm Password field must be the same as the Password field']);};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"ul\",{children:errors.map(function(error,idx){return/*#__PURE__*/_jsx(\"li\",{children:error},idx);})}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Email\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Username\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:function onChange(e){return setUsername(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Password\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Confirm Password\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Sign Up\"})]});}export default SignupFormPage;","map":{"version":3,"names":["React","useState","useDispatch","useSelector","Redirect","sessionActions","SignupFormPage","dispatch","sessionUser","state","session","user","email","setEmail","username","setUsername","password","setPassword","confirmPassword","setConfirmPassword","errors","setErrors","handleSubmit","e","preventDefault","signup","catch","res","json","data","map","error","idx","target","value"],"sources":["/home/brian/w15/practice-for-week-15-react-redux-authenticate-me-long-practice-main/authenticate-me/frontend/src/components/SignupFormPage/index.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport * as sessionActions from \"../../store/session\";\nimport './SignupForm.css';\n\nfunction SignupFormPage() {\n  const dispatch = useDispatch();\n  const sessionUser = useSelector((state) => state.session.user);\n  const [email, setEmail] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [errors, setErrors] = useState([]);\n\n  if (sessionUser) return <Redirect to=\"/\" />;\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (password === confirmPassword) {\n      setErrors([]);\n      return dispatch(sessionActions.signup({ email, username, password }))\n        .catch(async (res) => {\n          const data = await res.json();\n          if (data && data.errors) setErrors(data.errors);\n        });\n    }\n    return setErrors(['Confirm Password field must be the same as the Password field']);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <ul>\n        {errors.map((error, idx) => <li key={idx}>{error}</li>)}\n      </ul>\n      <label>\n        Email\n        <input\n          type=\"text\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          required\n        />\n      </label>\n      <label>\n        Username\n        <input\n          type=\"text\"\n          value={username}\n          onChange={(e) => setUsername(e.target.value)}\n          required\n        />\n      </label>\n      <label>\n        Password\n        <input\n          type=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          required\n        />\n      </label>\n      <label>\n        Confirm Password\n        <input\n          type=\"password\"\n          value={confirmPassword}\n          onChange={(e) => setConfirmPassword(e.target.value)}\n          required\n        />\n      </label>\n      <button type=\"submit\">Sign Up</button>\n    </form>\n  );\n}\n\nexport default SignupFormPage;\n"],"mappings":"slBAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAO,GAAKC,eAAZ,KAAgC,qBAAhC,CACA,MAAO,kBAAP,C,wFAEA,QAASC,eAAT,EAA0B,CACxB,GAAMC,SAAQ,CAAGL,WAAW,EAA5B,CACA,GAAMM,YAAW,CAAGL,WAAW,CAAC,SAACM,KAAD,QAAWA,MAAK,CAACC,OAAN,CAAcC,IAAzB,EAAD,CAA/B,CACA,cAA0BV,QAAQ,CAAC,EAAD,CAAlC,wCAAOW,KAAP,eAAcC,QAAd,eACA,eAAgCZ,QAAQ,CAAC,EAAD,CAAxC,yCAAOa,QAAP,eAAiBC,WAAjB,eACA,eAAgCd,QAAQ,CAAC,EAAD,CAAxC,yCAAOe,QAAP,eAAiBC,WAAjB,eACA,eAA8ChB,QAAQ,CAAC,EAAD,CAAtD,yCAAOiB,eAAP,eAAwBC,kBAAxB,eACA,eAA4BlB,QAAQ,CAAC,EAAD,CAApC,0CAAOmB,MAAP,gBAAeC,SAAf,gBAEA,GAAIb,WAAJ,CAAiB,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CAEjB,GAAMc,aAAY,CAAG,QAAfA,aAAe,CAACC,CAAD,CAAO,CAC1BA,CAAC,CAACC,cAAF,GACA,GAAIR,QAAQ,GAAKE,eAAjB,CAAkC,CAChCG,SAAS,CAAC,EAAD,CAAT,CACA,MAAOd,SAAQ,CAACF,cAAc,CAACoB,MAAf,CAAsB,CAAEb,KAAK,CAALA,KAAF,CAASE,QAAQ,CAARA,QAAT,CAAmBE,QAAQ,CAARA,QAAnB,CAAtB,CAAD,CAAR,CACJU,KADI,4FACE,iBAAOC,GAAP,mJACcA,IAAG,CAACC,IAAJ,EADd,QACCC,IADD,eAEL,GAAIA,IAAI,EAAIA,IAAI,CAACT,MAAjB,CAAyBC,SAAS,CAACQ,IAAI,CAACT,MAAN,CAAT,CAFpB,sDADF,+DAAP,CAKD,CACD,MAAOC,UAAS,CAAC,CAAC,+DAAD,CAAD,CAAhB,CACD,CAXD,CAaA,mBACE,cAAM,QAAQ,CAAEC,YAAhB,wBACE,oBACGF,MAAM,CAACU,GAAP,CAAW,SAACC,KAAD,CAAQC,GAAR,qBAAgB,oBAAeD,KAAf,EAASC,GAAT,CAAhB,EAAX,CADH,EADF,cAIE,8CAEE,cACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAEpB,KAFT,CAGE,QAAQ,CAAE,kBAACW,CAAD,QAAOV,SAAQ,CAACU,CAAC,CAACU,MAAF,CAASC,KAAV,CAAf,EAHZ,CAIE,QAAQ,KAJV,EAFF,GAJF,cAaE,iDAEE,cACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAEpB,QAFT,CAGE,QAAQ,CAAE,kBAACS,CAAD,QAAOR,YAAW,CAACQ,CAAC,CAACU,MAAF,CAASC,KAAV,CAAlB,EAHZ,CAIE,QAAQ,KAJV,EAFF,GAbF,cAsBE,iDAEE,cACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAElB,QAFT,CAGE,QAAQ,CAAE,kBAACO,CAAD,QAAON,YAAW,CAACM,CAAC,CAACU,MAAF,CAASC,KAAV,CAAlB,EAHZ,CAIE,QAAQ,KAJV,EAFF,GAtBF,cA+BE,yDAEE,cACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAEhB,eAFT,CAGE,QAAQ,CAAE,kBAACK,CAAD,QAAOJ,mBAAkB,CAACI,CAAC,CAACU,MAAF,CAASC,KAAV,CAAzB,EAHZ,CAIE,QAAQ,KAJV,EAFF,GA/BF,cAwCE,eAAQ,IAAI,CAAC,QAAb,qBAxCF,GADF,CA4CD,CAED,cAAe5B,eAAf"},"metadata":{},"sourceType":"module"}